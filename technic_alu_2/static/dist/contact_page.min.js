function validate_form(e){return e&&e.name&&e.subject&&e.message&&e.phone_number&&e.email&&is_email(e.email)&&is_fr_phone_number(e.phone_number)}function is_email(e){return!(!e||"string"!=typeof e)&&e.match(/^([\w.%+-]+)@([\w-]+\.)+([\w]{2,})$/i)}function is_fr_phone_number(e){return!(!e||(e=e.replace(new RegExp(" ","g"),""),isNaN(e)||10!==e.length))}function get_base_url(){let e=window.location.href,t=window.location.pathname;return e.replace(t,"")}function get_cookie(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),o=0;o<n.length;o++){var r=$.trim(n[o]);if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t}$(document).ready(function(){let e=Ractive({el:"#contact_form_container",template:"#contact_form",data:{form:{}},computed:{form_completed:function(){return validate_form(this.get("form"))}}});window.ractive_contact_form=e,e.on("send_message",()=>{e.set({form_loading:!0});let t=get_cookie("csrftoken");$.ajaxSetup({beforeSend:function(e){e.setRequestHeader("X-CSRFToken",t)}}),$.ajax({url:get_base_url()+"/api/send_message/",method:"POST",data:JSON.stringify(e.get("form")),dataType:"json"}).done(t=>{t.data&&(e.set({form_sent:!0}),Materialize.toast("Le message a été envoyé",4e3))}).fail(e=>{Materialize.toast("Le message n'a pas pu être envoyé, s'il vous plaît veuillez réessayer plus tard",4e3),console.error(e)}).complete(()=>{e.set({form_loading:!1})})}),e.observe("form.phone_number",function(t){if(t&&!isNaN(t)&&10===t.length){let o=[];for(var n=0;n<10;n+=2)o.push(t.substring(n,n+2));t=o.join(" "),e.set("form.phone_number",t)}})});